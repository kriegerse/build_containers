---
prepare-clamav:
  stage: prepare
  script:
    - mkdir tmp
    - echo -n "VAL1" > tmp/art1
    - echo "export VAR2=VAL2" > tmp/art2
  artifacts:
    expire_in: 1h
    paths:
      - tmp/

check_prepare:
  stage: build
  variables:
    VAR1: $(cat tmp/art1)
  script:
    - source tmp/art2
    - echo $VAR1
    - echo $VAR2


# build-clamv:
#   stage: build
#   script:
#     - docker build --network host -f clamav/Dockerfile
#       --build-arg FS_BASE=clamav
#       -t $docker_username/clamav-stage:gitlabtest .
#     - docker push $docker_username/clamav-stage:gitlabtest
#   only:
#     changes:
#       - clamav/*

# test-clamav:
#  stage: test


# publish-clamav:
#   stage: publish
#   script:
#     - docker pull
#     - docker image ls
#     - docker image ls $docker_username/clamav-stage:gitlabtest
